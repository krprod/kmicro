server:
      port: 8080
spring:
#      sql: #--- Manual data.sql selection Config !A good Practice
#            init:
#                  mode: always
      application:
            name: product-service
      profiles:
            active: "prod"
      datasource:
            url: jdbc:postgresql://localhost:5432/springmicro?currentSchema=product_schema
            username: bloguser
            password: bloguser
            driver-class-name: org.postgresql.Driver
            hikari:
                  pool-name: prorductServiceHikariPool
                  maximum-pool-size: 10
                  minimum-idle: 5
                  idle-timeout: 300000 # 5 minutes
                  connection-timeout: 20000 # 20 seconds
                  max-lifetime: 1200000 # 20 minutes
                  auto-commit: true
      flyway:
            enabled: true
            schemas: product_schema
#            create-schemas: true  #--Dev Config
            #            clean-disabled: false  #defualt:True,  if false, causes chaos #--DANGER: It drops every table, view, procedure, and trigger in your managed schemas, effectively resetting the database to a blank state.
            #            clean-on-validation-error: true  #--DANGER: If Flyway sees a validation error (like a modified V1__init.sql), it won't just fail and stopâ€”it will automatically run the clean command, wipe your entire database, and re-run all migrations from scratch to "fix" the state.
            baseline-on-migrate: true # Crucial for existing databases
            out-of-order: false        # Strict linear progression in prod
            lock-retry-count: 50 # Retries before failing
            repair-on-migrate: true
            locations:
                  - classpath:db/migration
#                  - classpath:db/specific/postgresql # Multi-DB support
#            table: product_schema_history
      jpa:
#            defer-datasource-initialization: true  #--- Manual data.sql selection Config !A good Practice
            hibernate:
                  ddl-auto: validate
#                  ddl-auto: create
            show-sql: true
      redis:
            host: localhost
            port: 6379
logging:
      level:
            org:
            springframework.orm.jpa: DEBUG
            hibernate:
                  resource.transaction: DEBUG
                  SQL: DEBUG
                  orm.jdbc.bind: TRACE
            cache:  TRACE

management:
      endpoints:
            web:
                  exposure:
                        include: health
      health:
            jdbc:
                  enabled: true
